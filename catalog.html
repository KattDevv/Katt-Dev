<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Katt | Scripts</title>

<style>
/* --- CORE & CATALOG STYLES --- */
* { box-sizing: border-box; font-family: "Inter", "Segoe UI", Roboto, sans-serif; }

body {
    margin: 0; padding: 40px 20px; min-height: 100vh;
    background: radial-gradient(circle at center, #14141c 0%, #050508 100%);
    display: flex; flex-direction: column; align-items: center; color: #ffffff;
    overflow-x: hidden;
}

body::before {
    content: ""; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
    width: 600px; height: 600px; background: #6236ff; filter: blur(200px); opacity: 0.12; z-index: 0;
}

.logo {
    position: fixed; top: 25px; left: 25px; width: 50px; height: 50px;
    cursor: pointer; transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 10;
}
.logo:hover { transform: scale(1.1) rotate(5deg); }

.page-header { position: relative; z-index: 1; margin-bottom: 50px; text-align: center; }
.page-header h1 {
    font-size: 48px; font-weight: 800; letter-spacing: -1.5px;
    background: linear-gradient(135deg, #ffffff 0%, #b58cff 100%);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}

.catalog-grid {
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px;
    max-width: 1200px; width: 100%; z-index: 1;
}

.card {
    background: rgba(22, 22, 30, 0.7); backdrop-filter: blur(16px);
    padding: 20px; border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.08);
    display: flex; align-items: center; gap: 15px;
    transition: transform 0.3s ease, border-color 0.3s ease;
}
.card:hover { border-color: rgba(181, 140, 255, 0.3); transform: translateY(-5px); }

.script-thumb { width: 90px; height: 90px; border-radius: 12px; object-fit: cover; border: 1px solid rgba(255, 255, 255, 0.1); }

.info { flex: 1; display: flex; flex-direction: column; justify-content: space-between; height: 90px; text-align: right; }
.info h2 { margin: 0; font-size: 18px; font-weight: 700; background: linear-gradient(135deg, #ffffff 0%, #b58cff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

/* --- SPOTLIGHT BUTTON STYLE --- */
.btn-view, .btn-copy, .pill {
    position: relative; overflow: hidden;
}

.btn-view::before, .btn-copy::before, .pill::before {
    content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
    background: radial-gradient(circle at var(--x, 50%) var(--y, 50%), rgba(255, 255, 255, 0.25) 0%, transparent 50%);
    opacity: 0; transition: opacity 0.3s ease; pointer-events: none;
}
.btn-view:hover::before, .btn-copy:hover::before, .pill:hover::before { opacity: 1; }

.btn-view {
    align-self: flex-end; padding: 8px 16px; background: #4b1dc2; border: none; border-radius: 8px;
    color: white; font-weight: 600; font-size: 13px; cursor: pointer; transition: 0.3s;
}

/* --- SHOWCASE OVERLAY --- */
#showcase-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(5, 5, 8, 0.9); backdrop-filter: blur(15px);
    z-index: 100; display: none; align-items: center; justify-content: center;
    opacity: 0; transition: opacity 0.4s ease;
}

.showcase-card {
    position: relative; background: rgba(22, 22, 30, 0.9); padding: 50px;
    width: 950px; min-height: 380px; border-radius: 32px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    display: flex; align-items: center; gap: 50px;
    transform: scale(0.9); transition: transform 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28);
}

.image-container { perspective: 1000px; flex-shrink: 0; }
.big-icon {
    width: 280px; height: 280px; border-radius: 24px; object-fit: cover;
    border: 1px solid rgba(255, 255, 255, 0.15); box-shadow: 0 15px 35px rgba(0,0,0,0.5);
    transition: transform 0.1s ease-out; transform-style: preserve-3d;
    will-change: transform; cursor: crosshair;
}

.content-right { flex: 1; display: flex; flex-direction: column; position: relative; height: 280px; text-align: left; }
.content-right h1 { margin: 0 0 20px 0; font-size: 48px; font-weight: 800; background: linear-gradient(135deg, #ffffff 0%, #b58cff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

.pill-group { display: flex; gap: 15px; }
.pill-container { position: relative; }
.pill { padding: 12px 24px; border-radius: 100px; background: rgba(75, 29, 194, 0.25); border: 1px solid rgba(181, 140, 255, 0.3); font-size: 15px; font-weight: 700; color: #e2d9ff; cursor: pointer; }

.tooltip { position: absolute; bottom: 140%; left: 50%; transform: translateX(-50%) translateY(10px); background: #1a1a24; padding: 10px 18px; border-radius: 12px; font-size: 14px; white-space: nowrap; border: 1px solid rgba(181, 140, 255, 0.4); opacity: 0; pointer-events: none; transition: 0.3s; z-index: 101; }
.pill-container:hover .tooltip { opacity: 1; transform: translateX(-50%) translateY(0); }

.btn-copy { position: absolute; bottom: 0; right: 0; padding: 20px 45px; background: #4b1dc2; border: none; border-radius: 18px; color: white; font-weight: 700; font-size: 18px; cursor: pointer; transition: 0.4s; }
.btn-copy:hover { transform: scale(1.05); box-shadow: 0 15px 40px rgba(94, 45, 227, 0.5); }

.close-btn { position: absolute; top: 25px; right: 25px; font-size: 30px; color: rgba(255,255,255,0.3); cursor: pointer; transition: 0.3s; z-index: 102; }
.close-btn:hover { color: #fff; transform: rotate(90deg); }
</style>
</head>

<body>

<img src="https://i.imgur.com/FEcuPAK.png" class="logo" onclick="window.location.href='index.html'">

<div class="page-header">
    <h1>Scripts</h1>
</div>

<div class="catalog-grid" id="catalog-container"></div>

<div id="showcase-overlay" onclick="closeShowcase()">
    <div class="showcase-card" id="showcaseCard" onclick="event.stopPropagation()">
        <span class="close-btn" onclick="closeShowcase()">Ã—</span>
        <div class="image-container">
            <img src="" class="big-icon" id="bigImg">
        </div>
        <div class="content-right">
            <h1 id="bigTitle">Script Name</h1>
            <div class="pill-group">
                <div class="pill-container">
                    <div class="pill" id="pillStatus" onmousemove="handleSpotlight(event)">Status</div>
                    <div class="tooltip" id="tipStatus">Tooltip</div>
                </div>
                <div class="pill-container">
                    <div class="pill" id="pillWork" onmousemove="handleSpotlight(event)">Safety</div>
                    <div class="tooltip" id="tipWork">Tooltip</div>
                </div>
            </div>
            <button class="btn-copy" id="copyBtn" onmousemove="handleSpotlight(event)" onclick="copyScript(this)">Copy Script</button>
        </div>
    </div>
</div>

<script>
const WORKER_URL = 'https://katt-admin.kattdevelopment.workers.dev';
let allScripts = [];
let currentCopyCode = "";

/* --- SPOTLIGHT EFFECT --- */
function handleSpotlight(e) {
    const el = e.currentTarget;
    const rect = el.getBoundingClientRect();
    const x = ((e.clientX - rect.left) / rect.width) * 100;
    const y = ((e.clientY - rect.top) / rect.height) * 100;
    el.style.setProperty('--x', x + '%');
    el.style.setProperty('--y', y + '%');
}

/* --- LOAD DATA --- */
async function loadCatalogData() {
    const container = document.getElementById('catalog-container');
    try {
        const response = await fetch(`${WORKER_URL}/api/data?t=${Date.now()}`);
        const data = await response.json();
        allScripts = Array.isArray(data) ? data : [data];
        
        container.innerHTML = "";
        allScripts.forEach((item, index) => {
            if (!item.title) return;
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <img src="${item.image || ''}" class="script-thumb">
                <div class="info">
                    <h2>${item.title}</h2>
                    <button class="btn-view" onmousemove="handleSpotlight(event)" onclick="openShowcase(${index})">View Script</button>
                </div>
            `;
            container.appendChild(card);
        });
    } catch (err) {
        container.innerHTML = `<p style="color:red">Server Error.</p>`;
    }
}

/* --- SHOWCASE ACTIONS --- */
function openShowcase(index) {
    const script = allScripts[index];
    document.getElementById('bigTitle').innerText = script.title;
    document.getElementById('bigImg').src = script.image;
    currentCopyCode = script.script;

    document.getElementById('pillStatus').innerText = script.isComplete ? "Complete" : "BETA";
    document.getElementById('tipStatus').innerText = script.isComplete ? "This script is complete" : "This script is in BETA";
    document.getElementById('pillWork').innerText = script.isWorking ? "Undetected" : "Detected";
    document.getElementById('tipWork').innerText = script.isWorking ? "This script is %100 working undetected" : "This script is currently detected";

    const overlay = document.getElementById('showcase-overlay');
    overlay.style.display = 'flex';
    setTimeout(() => {
        overlay.style.opacity = '1';
        document.getElementById('showcaseCard').style.transform = 'scale(1)';
    }, 10);
}

function closeShowcase() {
    const overlay = document.getElementById('showcase-overlay');
    overlay.style.opacity = '0';
    document.getElementById('showcaseCard').style.transform = 'scale(0.9)';
    setTimeout(() => { overlay.style.display = 'none'; }, 400);
}

function copyScript(btn) {
    navigator.clipboard.writeText(currentCopyCode).then(() => {
        const old = btn.innerText;
        btn.innerText = "Copied!";
        setTimeout(() => btn.innerText = old, 2000);
    });
}

/* --- THE FIXED 3D TILT LOGIC --- */
const bigImg = document.getElementById('bigImg');
bigImg.addEventListener('mousemove', (e) => {
    const rect = bigImg.getBoundingClientRect();
    const x = e.clientX - rect.left; // x position within element
    const y = e.clientY - rect.top;  // y position within element
    const centerX = rect.width / 2;
    const centerY = rect.height / 2;
    
    // Rotate based on distance from center
    const rotateX = ((y - centerY) / centerY) * -15; // Vertical distance moves X axis
    const rotateY = ((x - centerX) / centerX) * 15;  // Horizontal distance moves Y axis
    
    bigImg.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
});

bigImg.addEventListener('mouseleave', () => {
    bigImg.style.transform = `rotateX(0deg) rotateY(0deg) scale(1)`;
});

document.addEventListener('DOMContentLoaded', loadCatalogData);
</script>

</body>
</html>
